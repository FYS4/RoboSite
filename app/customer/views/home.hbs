<style>
  body {
    overflow-y: scroll;
  }
</style>

<div class="row">
  <div class="col s2 hide-on-med-and-down"></div>
  <div class="col l8 m12 s12">
    <ul class="collapsible popout" data-collapsible="accordion">
      {{#each images}}
        <li>
          {{#each this}}
            {{#if @first}}
              <div class="collapsible-header active">
                <i class="fa fa-flag" aria-hidden="true"></i> {{this}}
              </div>
            {{/if}}
          {{/each}}

          <div class="collapsible-body">
            <div class="row imagerow">
              {{#each this}}
                {{#if @first}}
                {{else}}
                  <div class="col l4 m6 s12 polaroid-images">
                    <a href="/image/view/{{this.file}}" title="{{this.title}}">
                      <img src="/image/load/10/{{this.file}}" alt="{{this.file}}">
                    </a>
                  </div>
                {{/if}}
              {{/each}}
            </div>
          </div>
        </li>
      {{/each}}
    </ul>
  </div>
  <div class="col s2 hide-on-med-and-down"></div>
</div>

<script>
  $(document).ready(() => {
    $('.collapsible').collapsible();

    $('li').click(function() {
      var index = $(this).index();

      var children = $(this).parent().children('li');

      for (var i = children.length; i > 0; i--) {
        if(i >= index) {
          $(children[i]).prependTo($(this).parent());
        } else {
          $(children[i]).appendTo($(this).parent());
        }
      }
      $(this).prependTo($(this).parent());
    });
  });
</script>
